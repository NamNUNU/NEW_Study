# 함수형 프로그래밍

## 성공적인 프로그래밍이란?

- 모든 프로그래밍 패러다임은 성공적인 프로그래밍을 위해 존재한다
- 성공적인 프로그래밍은 좋은 프로그램을 만드는 일이다
- 좋은 프로그램은 사용성, 성능, 확장성, 기획 변경에 대한 대응력 등이 좋다
- 이것들을 효율적이고 생산적으로 이루는 일이 성공적이 프로그래밍이다.

## 함수형 프로그래밍이란?

- 성공적인 프로그래밍을 위해 부수효과(side effect)를 미워하고 조합성을 강조하는 프로그래밍 패러다임이다
- 부수효과를 미워한다 => 순수 함수를 만든다.
- 조합성을 강조한다 => 모듈화 수준을 높인다.

## 순수함수

다음은 순수 함수의 예제이다.

```javascript
function add(a, b) {
    return a + b;
}
console.log(add(10, 5));
```

1. 동일한 인자를 주면 동일한 결과를 리턴함
2. 함수가 리턴 값을 주는 것 외에 외부에 영향을 끼치는 '부수효과'가 없다
3. 평가 시점이 중요하지 않다.

## 순수 함수가 아닌 함수

이번에는 순수함수가 아닌 함수의 예제를 알아보자

```javascript
var c = 10

function add2(a, b) {
    return a + b + c;
}
```

만약 c 가 프로그래밍이 동작하는 과정에서 변하게 된다면 add2는 순수함수가 아니게된다
반면에 c 가 상수로써 변하지 않는다면 add2는 순수함수이다.
아래는 순수함수가 아닌 상황에 대한 예제들이다

### 도중에 값이 변경될 경우

```javascript
console.log(add2(10,2)) // 22
c = 20;
console.log(add2(10,2)) // 32
```

위의 코드는 모든 값을 더하는 add2 함수의 결과값 이지만, 중간에 c 값이 변함에 따라 함수의 값도 변하게 된다.

### 부수효과

```javascript
function add3(a, b) {
    c = b;
    return a + b;
}
```

위의 코드는 함수 내부에서 외부에 영향을 미치기 때문에 부수 효과를 가지게 된다.
따라서 결과 자체는 항상 동일하나, 이는 순수 함수가 아니다

### 인자 값을 직접 변경할 경우

```javascript
var obj1 = { val: 10 };
function add4(obj, b) {
    obj.val += b;
}
```

위의 코드는 함수가 실행됨에 따라 obj안의 val 값이 변경된다.
즉, 넘어온 인자의 값을 직접 변경하는 경우이다.
따라서 실행 될때마다 결과 값이 달라지므로, 이는 순수 함수가 아니다.
반대로 아래의 코드는 순수함수이다.

```javascript
var obj1 = { val: 10 }
function add5(obj, b) {
    return { val: obj.val + b }
}
```

add5는 add4와 다르게 참조만 할 뿐 값을 변경하지 않는다.
또한 동일한 결과값을 리턴하므로 순수함수 라고 할 수 있다.

## 일급 함수

일급 함수란 함수를 값으로 다룰수 있는지를 말한다. 자바스크립트에서는 변수에 함수를 담을수 있다.
아래의 코드는 변수에 값으로 담아진 함수의 예제이다.

```javascript
var f1 = function (a) { return a * a; };
console.log(f1);
```

또한 함수가 함수를 인자로 받을수 있다는 것도 일급함수의 특징중 하나이다.
아래의 코드는 f3에 함수를 인자로 받아 실행시키는 예제이다.

```javascript
function f3(f) {
    return 10;
}

f3(function() {return 10;});
```

### 함수 예제

그럼 일급 함수와 함수형 프로그래밍의 특징을 이용해 add maker 함수를 만들어 보도록 하겠다

```javascript
function add_maker(a) {
    return function (b) { // 클로저
        return a + b;
    }
}

var add10 = add_maker(10);

console.log(add10(20));
```

위에서 부터 함수를 보도록하자
먼저 add_maker는 함수를 리턴한다.
add10이라는 변수는 add_maker에 a값을 10으로 넣은 함수를 리턴하게 된다.
결과적으로 add10은 a를 기억하는 클로저가 된다.
따라서 마지막줄에서 add10에 20을 넣으면 기존에 세팅된 10값과 20이 더해져 30이 출력된다.

```javascript
function f4(f1, f2, f3) {
    return f3(f1() + f2());
}

console.log(f4(
    function () { return 2; },
    function () { return 1; },
    function (a) { return a * a; },
));
```

위의 코드는 f1과 f2 값을 받아 f3의 인자로 넘겨준후 결과를 출력하는 코드이다.
바람직한 예제는 아니지만 이 코드도 순수 함수의 예제라고 할 수 있다.