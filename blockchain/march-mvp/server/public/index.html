<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>March MVP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" type="text/css" media="screen" href="main.css" /> -->
</head>

<body>
  <div>유저 정보 입력</div>
  <div>
    <div>
      <span>이름</span>
      <input id="name" type="text" />
    </div>
    <div>
      <span>나이</span>
      <input id="age" type="number" />
    </div>
    <div>
      <span>직업</span>
      <input id="job" type="text" />
    </div>
    <button id='submit-button'>전송</button>
  </div>
</body>
<!-- <script src="./js/main.js"></script> -->
<script>
  document.getElementById('submit-button').addEventListener('click', onClickEvent);

  function onClickEvent() {
    var param = {
      name: document.getElementById('name').value,
      age: document.getElementById('age').value,
      job: document.getElementById('job').value,
    }

    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        console.log(xhttp.responseText);
      }
    }
    xhttp.open('POST', '/addUser', true);
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send(JSON.stringify(param));

    getUsers();
  }

  function getUsers() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        console.log(xhttp.responseText);
      }
    }
    xhttp.open('GET', '/getUsers', true);
    xhttp.send();
  }
</script>

</html>